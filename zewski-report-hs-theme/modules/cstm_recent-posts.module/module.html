{# Module styles #}

<style>
{% scope_css %}

  {# Post #}

  .blog-listing__post {
    {% if module.styles.post.background.color.color %}
      background-color: rgba({{ module.styles.post.background.color.color|convert_rgb }}, {{ module.styles.post.background.color.opacity / 100 }});
    {% endif %}
    {{ module.styles.post.border.border.css }}
    {% if module.styles.post.corner.radius %}
      border-radius: {{ module.styles.post.corner.radius ~ 'px' }};
    {% endif %}
    {{ module.styles.post.spacing.spacing.css }}
  }

  .blog-listing__post-content {
    {{ module.styles.post.spacing.post_content.css }}
  }

  {# Image #}

  {% if module.styles.post.corner.radius %}
    .blog-listing__post-image {
      border-top-right-radius: {{ module.styles.post.corner.radius ~ 'px' }};
      border-top-left-radius: {{ module.styles.post.corner.radius ~ 'px' }};
    }
  {% endif %}

  {# Tags #}

  {% if module.tags %}
    .blog-listing__post-tag {
      {% if module.styles.tags.text.font.color %}
        color: {{ module.styles.tags.text.font.color }};
      {% endif %}
      {% if module.styles.tags.text.font.size %}
        font-size: {{ module.styles.tags.text.font.size ~ module.styles.tags.text.font.size_unit }};
      {% endif %}
      {% if module.styles.tags.text.font.style %}
        {{ module.styles.tags.text.font.style }};
      {% endif %}
      {% if module.styles.tags.text.transform %}
        text-transform: {{ module.styles.tags.text.transform }};
      {% endif %}
    }
  {% endif %}

  {# Title #}

  {% if module.title %}
    .blog-listing__post-title,
    .blog-listing__post-title-link {
      {% if module.styles.title.text.font.color %}
        color: {{ module.styles.title.text.font.color }};
      {% endif %}
      {% if module.styles.title.text.font.size %}
        font-size: {{ module.styles.title.text.font.size ~ module.styles.title.text.font.size_unit }};
      {% endif %}
      {% if module.styles.title.text.font.style %}
        {{ module.styles.title.text.font.style }};
      {% endif %}
      {% if module.styles.title.text.transform %}
        text-transform: {{ module.styles.title.text.transform }};
      {% endif %}
       margin-bottom: 0;
    }
  {% endif %}

  {# Author #}

  {% if module.author %}

    {% if module.styles.author.image.corner.radius %}
      .blog-listing__post-author-image {
        border-radius: {{ module.styles.author.image.corner.radius ~ 'px' }};
      }
    {% endif %}

    .blog-listing__post-author-name {
      {% if module.styles.author.text.font.color %}
        color: {{ module.styles.author.text.font.color }};
      {% endif %}
      {% if module.styles.author.text.font.size %}
        font-size: {{ module.styles.author.text.font.size ~ module.styles.author.text.font.size_unit }};
      {% endif %}
      {% if module.styles.author.text.font.style %}
        {{ module.styles.author.text.font.style }};
      {% endif %}
    }

  {% endif %}

  {# Date #}

  {% if module.date %}
    .blog-listing__post-timestamp {
      {% if module.styles.date.text.font.color %}
        color: {{ module.styles.date.text.font.color }};
      {% endif %}
      {% if module.styles.date.text.font.size %}
        font-size: {{ module.styles.date.text.font.size ~ module.styles.date.text.font.size_unit }};
      {% endif %}
      {% if module.styles.date.text.font.style %}
        {{ module.styles.date.text.font.style }};
      {% endif %}
    }
  {% endif %}
  .blog-listing__details span {
      {% if module.styles.date.text.font.color %}
        color: {{ module.styles.date.text.font.color }};
      {% endif %}
      {% if module.styles.date.text.font.size %}
        font-size: {{ module.styles.date.text.font.size ~ module.styles.date.text.font.size_unit }};
      {% endif %}
      {% if module.styles.date.text.font.style %}
        {{ module.styles.date.text.font.style }};
      {% endif %}
  }
  .blog-listing__details {
    display: flex;
    justify-content: space-between;
  }

  {# Description #}

  {% if module.description %}
    .blog-listing__post-summary,
    .blog-listing__post-summary * {
      {{ module.styles.description.text.font.css }}
    }
  {% endif %}

  {# Button #}

  {% if module.button %}

    {% if module.styles.button.alignment.alignment %}
      .blog-listing__post-button-wrapper {
        text-align: {{ module.styles.button.alignment.alignment.horizontal_align }};
      }
    {% endif %}

    .button {
      {% if module.styles.button.background.color.color %}
        background-color: rgba({{ module.styles.button.background.color.color|convert_rgb }}, {{ module.styles.button.background.color.opacity / 100 }});
      {% endif %}
      {{ module.styles.button.border.border.css }}
      {% if module.styles.button.corner.radius %}
        border-radius: {{ module.styles.button.corner.radius ~ 'px' }};
      {% endif %}
      {% if module.styles.button.text.font.color %}
        color: {{ module.styles.button.text.font.color }};
      {% endif %}
      {% if module.styles.button.text.font.size %}
        font-size: {{ module.styles.button.text.font.size ~ module.styles.button.text.font.size_unit }};
      {% endif %}
      {% if module.styles.button.text.font.style %}
        {{ module.styles.button.text.font.style }};
      {% endif %}
      {{ module.styles.button.spacing.spacing.css }}
      {% if module.styles.button.text.transform %}
        text-transform: {{ module.styles.button.text.transform }};
      {% endif %}
    }

    .button:hover,
    .button:focus {
      {% if module.styles.button.hover.background.color.color %}
        background-color: rgba({{ module.styles.button.hover.background.color.color|convert_rgb }}, {{ module.styles.button.hover.background.color.opacity / 100 }});
      {% endif %}
      {{ module.styles.button.hover.border.border.css }}
      {% if module.styles.button.hover.text.font.color %}
        color: {{ module.styles.button.hover.text.font.color }};
      {% endif %}
      {% if module.styles.button.text.font.size %}
        font-size: {{ module.styles.button.hover.text.font.size ~ module.styles.button.hover.text.font.size_unit }};
      {% endif %}
      {% if module.styles.button.hover.text.font.style %}
        {{ module.styles.button.hover.text.font.style }};
      {% endif %}
    }

    .button:active {
      {% if module.styles.button.hover.background.color.color %}
        background-color: rgba({{ color_variant(module.styles.button.hover.background.color.color, 80)|convert_rgb }}, {{ module.styles.button.hover.background.color.opacity / 100 }});
      {% endif %}
      {{ module.styles.button.hover.border.border.css }}
      {% if module.styles.hover.border.border.top.color %}
        border-color: {{ color_variant(module.styles.button.hover.border.border.top.color, 80) }};
      {% endif %}
      {% if module.styles.button.hover.text.font.color %}
        color: {{ module.styles.button.hover.text.font.color }};
      {% endif %}
      {% if module.styles.button.text.font.size %}
        font-size: {{ module.styles.button.hover.text.font.size ~ module.styles.button.hover.text.font.size_unit }};
      {% endif %}
      {% if module.styles.button.hover.text.font.style %}
        {{ module.styles.button.hover.text.font.style }};
      {% endif %}
    }

  {% endif %}
  .blog-listing__post-image-wrapper {
    margin-right: 0;
    width: 33%;
  }
  .blog-listing__post-content {
    width: 67%;
  }
{% end_scope_css %}
</style>

{# Sets whether to use recent posts or recent tag posts HubL tag #}

{% if module.select_blog_type == 'recent_posts' %}
  {% set post_listing = blog_recent_posts(module.select_blog, module.number_of_posts) %}
{% else %}
  {% set post_listing = blog_recent_tag_posts(module.select_blog, module.select_tag, module.number_of_posts) %}
{% endif %}

{# Sets CSS classes based on style options #}

{% if module.styles.button.presets.button_style == 'secondary' %}
  {% set button_style = 'button--secondary' %}
{% elif module.styles.button.presets.button_style == 'highlight' %}
  {% set button_style = 'button--highlight' %}
{% elif module.styles.button.presets.button_style == 'simple' %}
  {% set button_style = 'button--simple' %}  
{% endif %}

{% if module.styles.button.presets.button_size == 'small' %}
  {% set button_size = 'button--small' %}
{% elif module.styles.button.presets.button_size == 'large' %}
  {% set button_size = 'button--large' %}
{% endif %}

{# Blog listing #}

<section class="blog-listing blog-listing--{{ module.layout_style }} {% if module.layout_style == 'card' %}blog-listing--{{ module.number_of_posts }}-col{% endif %}">

{% if post_listing|length > 0 %}
 
    
  
  {% for post in post_listing %}

    {# Blog listing article #}

    <article class="blog-listing__post card {{ card_style }}{{ ' shadow' if module.styles.post.shadow.shadow == 'shadow' }}" aria-label="Blog post summary: {{ post.name }}">

      {% if post.featured_image and module.featured_image %}
        <a class="blog-listing__post-image-wrapper" href="{{ post.absolute_url }}" aria-label="{% if post.featured_image_alt_text %}Featured image: {{ post.featured_image_alt_text }} - {% endif %}Read full post: {{ post.name }}">
          <img class="blog-listing__post-image" src="{{ post.featured_image }}" {% if module.layout_style == 'card'%}height="200"{% endif %} loading="lazy" alt="{{ post.featured_image_alt_text }}">
        </a>        
      {% else %}
        <a class="blog-listing__post-image-wrapper" href="{{ post.absolute_url }}" aria-label="{% if post.featured_image_alt_text %}Featured image: {{ post.featured_image_alt_text }} - {% endif %}Read full post: {{ post.name }}">
          <img class="blog-listing__post-image" src="{{ get_asset_url('../../images/img-blog-card-default.png') }}" loading="lazy" alt="{{ post.name }}">
        </a>
      {% endif %}

      {# Article content #}

      <div class="blog-listing__post-content">

        {# Article header #}

        <div class="blog-listing__header">
          <div class="blog-listing__details" >
            <div>
              {% if module.date %}
                <time class="blog-listing__post-timestamp" datetime="{{ post.publish_date }}">
                  {{ post.publish_date|datetimeformat('%e %b, %Y') }}
                </time>
              {% endif %}
            </div>
            <div>
              <span>{% if content.post_body|wordcount > 0 %}{{content.post_body|wordcount|float|divide(300)|round(0, 'ceil')}}{% else %}1{% endif %}min</span>
            </div>
          </div>
          {# Date #}

          
          {# Tags #}

          {% if module.tags and post.tag_list %}
            <div class="blog-listing__post-tags">
              <a class="blog-listing__post-tag" href="{{ blog_tag_url(group.id, post.tag_list[0].slug) }}">{{ post.tag_list[0].name }}</a>            
            </div>
          {% endif %}

          {# Title #}

          {% if module.title %}
            <h3 class="blog-listing__post-title">
              <a class="blog-listing__post-title-link" href="{{ post.absolute_url }}">{{ post.name }}</a>
            </h3>
          {% endif %}

          {# Author #}

          {% if module.author && post.blog_author %}
            <div class="blog-listing__post-author">
              {% if post.blog_author.avatar %}
                <img class="blog-listing__post-author-image" src="{{ post.blog_author.avatar }}" width="50" loading="lazy" alt="Picture of {{ post.blog_author.display_name }}">
              {% endif %}
              <a class="blog-listing__post-author-name" href="{{ blog_author_url(group.id, post.blog_post_author.slug) }}">{{ post.blog_author.display_name }}</a>
            </div>
          {% endif %}

        </div>

        {# Summary #}

        {% if module.description %}
          <div class="blog-listing__post-summary">
            {{ post.post_list_content|truncatehtml(100) }}
          </div>
        {% endif %}

        {# Button #}

        {% if module.button %}
          <div class="blog-listing__post-button-wrapper">
            <a class="blog-listing__post-button button {{ button_style }} {{ button_size }}" href="{{ post.absolute_url }}">{{ module.button_text }}</a>
          </div>
        {% endif %}

      </div>

    </article>

  {% endfor %}
   
{% else %}

  {% if is_in_editor %}
    <style>

      {# Placeholder styles #}

      .hs-inline-edit .placeholder {
        background-color: #f5f8fa !important;
        border: 1px dashed #516f90 !important;
        display: block !important;
        font-size: 14px !important;
        margin: 2px 1px !important;
        outline: 1px dashed #fff !important;
        text-align: center !important;
        width: 100% !important;
      }

      .placeholder > * {
        box-sizing: border-box !important;
        display: block !important;
        margin: 1px !important;
        padding: 12px !important;
        width: calc(100% - 2px) !important;
      }

      p.placeholder__title {
        color: #7c98b6 !important;
        font-family: 'Helvetica Neue', 'Helvetica', Arial, sans-serif !important;
        font-size: 14px !important;
        font-style: italic !important;
        font-weight: 700 !important;
        line-height: initial !important;
        margin-bottom: 10px !important;
        margin-top: 0 !important;
        padding: 0 !important;
        text-shadow: 0 -1px 0 hsla(0,0%,100%,.5) !important;
      }

      p.placeholder__description {
        color: #7c98b6 !important;
        font-family: 'Helvetica Neue', 'Helvetica', Arial, sans-serif !important;
        font-style: italic !important;
        font-weight: 400 !important;
        line-height: 1.6 !important;
        margin: 0 !important;
        text-shadow: 0 -1px 0 hsla(0,0%,100%,.5) !important;
      }

    </style>
    <div class="placeholder">
      <div class="placeholder__inner">
        <p class="placeholder__title">{{ module.placeholder.title }}</p>
        <p class="placeholder__description">{{ module.placeholder.description }}</p>
      </div>
    </div>
  {% endif %}

{% endif %} 
  
</section>
{% if module.layout_style == 'slider' %}  
<div id="controls">
  

<button class="c-pagination__dot" id="post-prev">
  <svg width="6" height="11" viewBox="0 0 6 11" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M0.210851 5.17471C0.0942769 5.29114 0.02871 5.44909 0.0285649 5.61385L0.0285649 5.92871C0.0304739 6.09311 0.0957753 6.25042 0.210851 6.36785L4.46971 10.6184C4.5475 10.6969 4.65339 10.741 4.76385 10.741C4.87431 10.741 4.9802 10.6969 5.05799 10.6184L5.64628 10.0301C5.72422 9.95377 5.76814 9.84925 5.76814 9.74014C5.76814 9.63102 5.72422 9.5265 5.64628 9.45014L1.95914 5.77128L5.64628 2.09242C5.72471 2.01463 5.76882 1.90874 5.76882 1.79828C5.76882 1.68782 5.72471 1.58192 5.64628 1.50414L5.05799 0.924137C4.9802 0.845706 4.87432 0.801591 4.76385 0.801591C4.65339 0.801591 4.5475 0.845706 4.46971 0.924137L0.210851 5.17471Z" fill="#80A4AD"/>
  </svg>
</button>
<div class="c-pagination__dots c-pagination--products__dots u-display--inline o-list-bare o-list-inline">  
  {% for x in range(0,post_listing|length) %}  
  <button data-nav="{{loop.index}}" tabindex="{{loop.index}}" aria-selected="true" aria-controls="tns1-item{{loop.index}}" type="button" class="c-pagination__dot link--none u-display--block {% if loop.first %} tns-nav-active {% endif %} ">{{loop.index }}</button>
  
  {% endfor %}
</div>
  <button class="c-pagination__dot" id="post-next">
    <svg width="6" height="11" viewBox="0 0 6 11" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M5.78939 6.39634C5.90597 6.27991 5.97153 6.12195 5.97168 5.95719V5.64234C5.96977 5.47794 5.90447 5.32062 5.78939 5.20319L1.53054 0.952623C1.45275 0.874194 1.34686 0.830078 1.23639 0.830078C1.12593 0.830078 1.02004 0.874194 0.942251 0.952623L0.353965 1.54091C0.276026 1.61727 0.232106 1.72179 0.232106 1.83091C0.232106 1.94002 0.276026 2.04454 0.353965 2.12091L4.04111 5.79977L0.353965 9.47862C0.275536 9.55641 0.23142 9.6623 0.23142 9.77277C0.23142 9.88323 0.275536 9.98912 0.353965 10.0669L0.942251 10.6469C1.02004 10.7253 1.12593 10.7695 1.23639 10.7695C1.34686 10.7695 1.45275 10.7253 1.53054 10.6469L5.78939 6.39634Z" fill="#80A4AD"/>
    </svg>
  </button>
</div>
{% endif %} 
{% if module.layout_style == 'slider' %}  
{% require_css %}
<style>
  {% scope_css %}
  .blog-listing__post {
    display: flex !important;
  }
  .blog-listing__post-content {
    text-align: left;
  }
  .c-pagination__dot  {
    background: #fff;
    border: 1px solid #80A4AD;
    color: #80A4AD;
    padding: 12px;
    font-size: 16px;
    line-height: 1.5;
    min-width: 50px;
    text-align: center;
    justify-content: center;
    margin: 0 8px;
  }
  .c-pagination__dot.tns-nav-active{
    background: #80A4AD;
    color: #fff;
  }
  div#controls {
    display: flex;
    justify-content: center;
  }
  {% end_scope_css %} 
</style>
{% end_require_css %}

{% require_js %}
<script>
  window.addEventListener('load', () => {

    var el = document.querySelector('.blog-listing--slider');

    var slider = tns({
      arrowKeys: false,
      autoplay: true,
      container: '.blog-listing--slider',
      controls: false,
      controlsPosition: 'bottom',
      navContainer: '.c-pagination--products__dots',
      gutter: 23,
      items: 1,
      mouseDrag: true,
      nav: true,
      slideBy: 1,
      responsive: {
        767: {          
          items: 1
        }
      }
    });

    el.classList.add('show');
    el.classList.remove('hide');
    document.querySelector('#post-prev').onclick = function () {
      slider.goTo('prev');
    };
    document.querySelector('#post-next').onclick = function () {
      slider.goTo('next');
    };
  });  
  
  
</script>
  
{% end_require_js %}
{% endif %}